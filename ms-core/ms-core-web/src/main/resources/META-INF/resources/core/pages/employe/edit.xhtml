<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core" 
                template="/core/templates/#{configBean.theme}/layout-edit.xhtml"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="entityId" value="#{employeBean.entityId}" />
            <f:viewAction action="#{employeBean.initEntity()}"/>
        </f:metadata>
    </ui:define>

    <ui:param name="crudBean" value="#{employeBean}"/>

    <ui:define name="breadcrumb"><li><i class="pi pi-angle-right"/></li>
        <li>#{msg['core.breadcrumb.entity']}</li>
    </ui:define>
    <ui:define name="title">
        #{msge['core.pages.employe.edit.title']}
    </ui:define>
    <ui:define name="description">
        <h:outputText value="#{msge['core.pages.employe.list.description']}"/>
    </ui:define>

    <ui:define name="fields">
        <p:tabView>
            <p:tab  id="simpleUser" title="#{msge['core.pages.employe.fields.info-employe']}">
                <p:panel header ="#{msge['core.pages.employe.fields.info-personnel']}">
                    <ui:include src="fields.xhtml" />
                </p:panel>
                <p:spacer height="30"/>
                <p:panel header ="#{msge['core.pages.employe.fields.address-employe']}">
                    <ui:include src="/core/pages/address/address-fields.xhtml">
                        <ui:param name="id" value="employe"/>
                        <ui:param name="address" value="#{employeBean.entity.address}"/>
                    </ui:include>
                </p:panel>
            </p:tab>
            <p:tab id="userAssociate" title="#{msge['core.pages.employe.fields.create-user']}"
                   rendered="#{!employeBean.updating}">
                <div class="field col-12 md:col-6 lg:col-4">
                    <p:outputLabel value="#{msge['core.pages.employe.fields.create-user']}"/>
                    <br/><p:spacer height="30"/>
                    <p:toggleSwitch value="#{employeBean.createUser}" onIcon="pi pi-check" offIcon="pi pi-times">
                        <p:ajax process="@this" update="user" listener="#{employeBean.userLabelFields}"/>
                    </p:toggleSwitch>
                </div>
                <p:panel id="user" header ="#{msge['core.pages.employe.fields.utilisateur']}">
                    <ui:include src="tabs/user.xhtml" />
                </p:panel>
            </p:tab>
        </p:tabView>

    </ui:define>

</ui:composition>