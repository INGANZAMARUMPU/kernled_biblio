<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <div class="card">
            <p:outputPanel id="group-membre-ajout-panel"  styleClass="groupClass">
                <div class="grid formgroup">
                    <div class="grid formgrid col-12 md:col-10 lg:col-10">
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-poste-occupe" value="#{msga['biblio.pages.membre.fields.poste-occupe']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="group-poste-occupe" value="#{crudBean.acteur.poste}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                                <f:selectItems value="#{crudBean.postes}"  var="item" itemLabel="#{item.libellePoste}"
                                               itemValue="#{item}"/>
                            </p:selectOneMenu>
                        </div>  
                        <p:spacer width="10"/>
                        <div class="formgrid grid ui-fluid col-3">
                            <div class="field formgrid col">
                                <p:outputLabel for="mg_signataire" value="#{msga['biblio.pages.membre.edit.signataire']}"/>
                                <div class="field-checkbox  mt-2">
                                    <p:toggleSwitch  id="mg_signataire" value="#{crudBean.acteur.obligatoire}" onIcon="pi pi-check" offIcon="pi pi-times"/>
                                </div>
                            </div><p:spacer width="15"/>
                            <div class="field formgrid col">
                                <p:outputLabel for="mg_signataire_oblg" value="#{msga['biblio.pages.membre.fields.obligatoire']}"/>
                                <div class="field-checkbox mt-2">
                                    <p:toggleSwitch  id="mg_signataire_oblg" value="#{crudBean.acteur.obligatoire}" onIcon="pi pi-check" offIcon="pi pi-times"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid formgrid">
                    <div class="grid formgrid col-12 md:col-10 lg:col-10">
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-num-client" value="#{msga['biblio.pages.membre.fields.num-client']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" id="group-num-client"  class="w-full" value="#{crudBean.acteur.membre}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                            </p:selectOneMenu>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-nom" value="#{msga['biblio.pages.membre.fields.nom']}"/>
                            <p:inputText id="group-nom" required="false" class="w-full" value="#{crudBean.acteur.nom}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-prenom" value="#{msga['biblio.pages.membre.fields.prenom']}"/>
                            <p:inputText id="group-prenom" required="false" class="w-full" value="#{crudBean.acteur.prenom}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-sexe" value="#{msga['biblio.pages.membre.fields.sexe']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" required="false" id="group-sexe" value="#{crudBean.acteur.sexe}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true"/>
                                <f:selectItems var="sexe" value="#{crudBean.sexes}" itemLabel="#{sexe.libelle}" itemValue="#{sexe}"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-date-naissance" value="#{msga['biblio.pages.membre.fields.date-naissance']}"/> <br/>
                            <p:calendar id="group-date-naissance" showOn="button" 
                                        mindate="01/01/1923" class="w-full" value="#{crudBean.acteur.dateNaissance}" 
                                        navigator="true" pattern="#{crudBean.userSession.settings.formats.shortDatePattern}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-lieu-naissance" value="#{msga['biblio.pages.membre.fields.lieu-naissance']}"/>
                            <p:inputText id="group-lieu-naissance" class="w-full" value="#{crudBean.acteur.lieuNaissance}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-adresse" value="#{msga['biblio.pages.membre.fields.rue-maison']}"/>
                            <p:inputText id="group-adresse"  class="w-full" value="#{crudBean.streetAddressActeur}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel value="#{msga['biblio.pages.membre.fields.email']}"/>
                            <p:inputText class="w-full" value="#{crudBean.acteur.email}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel value="#{msga['biblio.pages.membre.fields.bp']}"/>
                            <p:inputText disabled="" class="w-full" value="#{crudBean.postalCodeActeur}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-tel-fix" value="#{msga['biblio.pages.membre.fields.tel-fix']}"/>
                            <p:inputText id="group-tel-fix"  class="w-full" value="#{crudBean.acteur.telephone}"/>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="zonegeo" value="#{msga['biblio.pages.membre.fields.zone']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" id="zonegeo" class="w-full" value="#{crudBean.localityActeur}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                                <f:selectItems var="loc" value="#{crudBean.localities}" itemValue="#{loc}" itemLabel="#{loc.label}"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel value="#{msga['biblio.pages.membre.fields.personne-contacter']}"/>
                            <p:inputText class="w-full" value="#{crudBean.acteur.personneAContacter}"/>
                        </div>
                        <div class="field col-12 md:col-6 lg:col-4">
                            <p:outputLabel for="phoneNum" value="#{msga['biblio.pages.membre.fields.portable']}"/>
                            <div class="ui-inputgroup">
                                <p:selectOneMenu id="phoneNum" class="ui-inputgroup-addon" value="#{crudBean.phoneCode}" filter="true" 
                                                 style="width:95px; height: 35px;" filterMatchMode="contains" converter="omnifaces.SelectItemsConverter">
                                    <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                                    <f:selectItems value="#{crudBean.countries}" var="item" itemValue="#{item.phoneCode}" itemLabel="#{item.phoneCode} (#{item.label})" />
                                </p:selectOneMenu>
                                <p:inputMask id="phoneN" placeholder="__ __ __ __" class="w-full" value="#{crudBean.phonNumber}"/>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-type-activite" value="#{msga['biblio.pages.membre.fields.type-activite']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="group-type-activite" value="#{crudBean.acteur.secteurActivite}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                                <f:selectItems value="#{crudBean.secteurActivites}"  var="item" itemLabel="#{item.libelle}"
                                               itemValue="#{item}"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="field col-12 md:col-4 lg:col-4">
                            <p:outputLabel for="group-branche-activite" value="#{msga['biblio.pages.membre.fields.branche-activite']}"/>
                            <p:selectOneMenu  filter="true" filterMatchMode="contains" required="false" class="w-full" id="group-branche-activite" value="#{crudBean.acteur.brancheActivite}" converter="omnifaces.SelectItemsConverter">
                                <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                                <f:selectItems value="#{crudBean.brancheActivites}"  var="item" itemLabel="#{item.libelle}"
                                               itemValue="#{item}"/>
                            </p:selectOneMenu>
                        </div>
                        <div class="formgrid grid ui-fluid col-3">
                            <p:spacer width="10"/>
                            <div class="field formgrid col">
                                <p:outputLabel for="group-actif" value="#{msga['biblio.pages.membre.fields.actif']}"/>
                                <div class="field-checkbox">
                                    <p:toggleSwitch id="group-actif" value="#{crudBean.acteur.actif}" onIcon="pi pi-check" offIcon="pi pi-times" />
                                </div>
                            </div>
                            <div class="field formgrid col">
                                <p:outputLabel for="group-chef" value="#{msga['biblio.pages.gestion-groupement.acteur.chef']}"/>
                                <div class="field-checkbox">
                                    <p:toggleSwitch id="group-chef" value="#{crudBean.acteur.chef}" onIcon="pi pi-check" offIcon="pi pi-times" />
                                </div>
                            </div>
                            <div class="field formgrid col">
                                <p:outputLabel for="group-analphabete" value="#{msga['biblio.pages.membre.fields.analphabete']}"/>
                                <div class="field-checkbox">
                                    <p:toggleSwitch id="group-analphabete" value="#{crudBean.acteur.analphabete}" onIcon="pi pi-check" offIcon="pi pi-times" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-right mt-3">
                    <p:commandButton id="ajouterMG" icon="fa fa-save" action="#{crudBean.ajouterMG()}" value="#{msga['biblio.pages.membre.fields.ajouter']}"
                                     process="group-membre-ajout-panel" update="group-membre-ajout-panel, membreGroupes" rendered="#{not crudBean.modifierActor}"/>
                    <p:commandButton id="modifierMG" icon="fa fa-edit" action="#{crudBean.modifierMG()}" value="#{msga['biblio.pages.membre.fields.modifier']}"
                                     process="group-membre-ajout-panel" update="group-membre-ajout-panel, membreGroupes" rendered="#{crudBean.modifierActor}"/>
                    <p:spacer width="2"/>

                    <p:commandButton id="btnReinitMG" value="#{msga['biblio.pages.membre.fields.reinitialiser']}" type="reset" class="btn-default" process="group-membre-ajout-panel" update="group-membre-ajout-panel" icon="fa fa-refresh" />
                </div>

                <div class="mt-3"/>

                <p:dataTable id="membreGroupes" emptyMessage="#{msga['biblio.pages.membre.fields.aucun-membre-renseigne']}"
                             value="#{crudBean.acteurs}" var="item"
                             widgetVar="acteursTable"
                             rows="10"
                             paginator="true" paginatorPosition="both"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} enregistrements"
                             rowsPerPageTemplate="5,10,{ShowAll|'Tout'}">
                    <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.nom']}" sortBy="#{item.nom}" filterBy="#{item.nom}" filterMatchMode="contains">
                        <h:outputText value="#{item.nom}" />
                    </p:column>
                    <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.prenom']}" sortBy="#{item.prenom}" filterBy="#{item.prenom}" filterMatchMode="contains">
                        <h:outputText value="#{item.prenom}"/>
                    </p:column>
                    <p:column headerText="#{msga['biblio.pages.membre.fields.lieu-naissance']}"  sortBy="#{item.lieuNaissance}" filterBy="#{item.lieuNaissance}" filterMatchMode="contains">
                        <h:outputText value="#{item.lieuNaissance}"/>
                    </p:column>
                    <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.date-naissance']}" sortBy="#{item.dateNaissance}" filterBy="#{item.dateNaissance}" filterMatchMode="contains">
                        <h:outputText value="#{item.dateNaissance}">
                            <f:convertDateTime dateStyle="short" type="localDate"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="#{msga['biblio.pages.membre.fields.adresse']}" sortBy="#{item.adresse.street}" filterBy="#{item.adresse.street}" filterMatchMode="contains">
                        <h:outputText value="#{item.adresse.street}"/>
                    </p:column>
                    <p:column  headerText="#{msga['biblio.pages.membre.fields.chef']}">
                        <p:tag rendered="#{item.chef == true}" icon="pi pi-check-circle" severity="success" value="Oui"/>
                        <p:tag rendered="#{item.chef == false}" icon="pi pi-times-circle" severity="warning" value="Non"/>
                    </p:column>
                    <p:column  headerText="#{msga['biblio.pages.membre.fields.actif']}" >
                        <p:tag rendered="#{item.actif == true}" icon="pi pi-check-circle" severity="success" value="Oui"/>
                        <p:tag rendered="#{item.actif == false}" icon="pi pi-times-circle" severity="warning" value="Non"/>
                    </p:column>   
                    <p:column headerText="#{msga['core.components.datatable.actions']}">
                        <p:commandButton rendered="#{item.id ==null}" icon="fa fa-minus" class="ui-button-danger" action="#{crudBean.retirerActeur(item)}" title="#{msga['biblio.pages.membre.fields.retirer']}" process="membreGroupes" update="membreGroupes"/> 
                        <p:commandButton icon="fa fa-edit" style="margin-left: 0.25em" action="#{crudBean.trouverActeur(item)}" title="#{msg['core.components.datatable.operations.edit']}" process="membreGroupes" update="@(.groupClass), membreGroupes"/> 
                        <p:commandButton rendered="#{item.id !=null and item.actif == false}"
                                         title="#{msga['biblio.pages.membre.fields.activer']}"
                                         style="margin-left: 0.25em"  icon="fa fa-toggle-on" class="ui-button-success"
                                         action="#{crudBean.activer(item)}" update="membreGroupes" process="membreGroupes">
                            <p:confirm header="Confirmation" message="Êtes-vous sûrs d'activer ce membre ?" icon="pi pi-exclamation-triangle"/>
                        </p:commandButton>
                        <p:commandButton rendered="#{item.id !=null and item.actif == true}"
                                         icon="fa fa-ban" class="ui-button-danger" style="margin-left: 0.25em" 
                                         title="#{msga['biblio.pages.membre.fields.desactiver']}" 
                                         action="#{crudBean.desactiver(item)}" process="membreGroupes" update="membreGroupes">
                            <p:confirm header="Confirmation" message="Êtes-vous sûrs de désactiver ce membre ?" icon="pi pi-exclamation-triangle"/>
                        </p:commandButton>   
                    </p:column>
                </p:dataTable>
            </p:outputPanel>
        </div>  
    </h:body>
</html>
