<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <p:outputPanel id="repPanel">
            <p:fieldset>
                <div class="grid formgrid">
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-nom" value="#{msga['biblio.pages.membre.fields.nom']}"/>
                        <p:inputText id="dirigeant-nom" class="w-full" value="#{crudBean.acteur.nom}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-prenoms" value="#{msga['biblio.pages.membre.fields.prenom']}"/>
                        <p:inputText id="dirigeant-prenoms" class="w-full" value="#{crudBean.acteur.prenom}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-sexe" value="#{msga['biblio.pages.membre.fields.sexe']}"/> <br/>
                        <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="dirigeant-sexe" value="#{crudBean.acteur.sexe}" 
                                         converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" itemValue="#{null}" />
                            <f:selectItems value="#{crudBean.sexes}"  var="item" itemLabel="#{item.libelle}"
                                           itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-profession" value="#{msga['biblio.pages.membre.fields.profession']} *"/>
                        <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="dirigeant-profession" value="#{crudBean.acteur.profession}" 
                                         converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                            <f:selectItems value="#{crudBean.professions}"  var="item" itemLabel="#{item.libelleProfession}"
                                           itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-nationalite" value="#{msga['biblio.pages.membre.fields.nationalite']}"/>
                        <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="dirigeant-nationalite" value="#{crudBean.acteur.nationalite}"
                                         converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                            <f:selectItems value="#{crudBean.countries}"  var="item" itemLabel="#{item.nationalityLabel}"
                                           itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-rue-maison" value="#{msga['biblio.pages.membre.fields.rue-maison']}"/>
                        <p:inputText id="dirigeant-rue-maison" class="w-full" value="#{crudBean.streetAddressActeur}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="quartierDir" value="#{msga['biblio.pages.membre.fields.quartier']}"/>
                        <p:selectOneMenu  filter="true" filterMatchMode="contains" id="quartierDir" class="w-full" value="#{crudBean.localityActeur}" 
                                         converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true"/>
                            <f:selectItems value="#{crudBean.localities}" var="l" itemValue="#{l}" itemLabel="#{l.label}" />
                        </p:selectOneMenu>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel value="#{msga['biblio.pages.membre.fields.email']}"/>
                        <p:inputText class="w-full" value="#{crudBean.acteur.email}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel value="#{msga['biblio.pages.membre.fields.bp']}"/>
                        <p:inputText class="w-full" value="#{crudBean.postalCodeActeur}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="dirigeant-tel-fix" value="#{msga['biblio.pages.membre.fields.tel-fix']}"/>
                        <p:inputText id="dirigeant-tel-fix"  class="w-full" value="#{crudBean.acteur.telephone}"/>
                    </div>
                    <div class="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="group-poste-occupe" value="#{msga['biblio.pages.membre.fields.poste-occupe']}"/>
                        <p:selectOneMenu  filter="true" filterMatchMode="contains" class="w-full" id="group-poste-occupe" value="#{crudBean.acteur.poste}" converter="omnifaces.SelectItemsConverter">
                            <f:selectItem itemValue="#{null}" itemLabel="-- #{msg['core.page.fields.select.message']} --" noSelectionOption="true" />
                            <f:selectItems value="#{crudBean.postes}"  var="item" itemLabel="#{item.libellePoste}"
                                           itemValue="#{item}"/>
                        </p:selectOneMenu>
                    </div> <p:spacer width="10"/>
                    <div class="formgrid grid ui-fluid col-3">
                        <div class="field formgrid col">
                            <p:outputLabel for="mg_signataire" value="#{msga['biblio.pages.membre.edit.signataire']}"/>
                            <div class="field-checkbox  mt-2">
                                <p:toggleSwitch  id="mg_signataire" value="#{crudBean.acteur.signataire}" onIcon="pi pi-check" offIcon="pi pi-times" />
                            </div>
                        </div>
                        <div class="field formgrid col">
                            <p:outputLabel for="group-actif" value="#{msga['biblio.pages.membre.fields.actif']}"/>
                            <div class="field-checkbox">
                                <p:toggleSwitch id="group-actif" value="#{crudBean.acteur.actif}" onIcon="pi pi-check" offIcon="pi pi-times" />
                            </div>
                        </div>
                        <div class="field formgrid col">
                            <p:outputLabel for="group-chef" value="#{msga['biblio.pages.gestion-groupement.acteur.chef']}"/>
                            <div class="field-checkbox">
                                <p:toggleSwitch id="group-chef" value="#{crudBean.acteur.chef}" onIcon="pi pi-check" offIcon="pi pi-times" />
                            </div>
                        </div>
                        <div class="field formgrid col">
                            <p:outputLabel for="group-analphabete" value="#{msga['biblio.pages.membre.fields.analphabete']}"/>
                            <div class="field-checkbox">
                                <p:toggleSwitch id="group-analphabete" value="#{crudBean.acteur.analphabete}" onIcon="pi pi-check" offIcon="pi pi-times" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3 text-right">
                    <p:commandButton id="ajouterDir" value="#{msga['core.components.datatable.add']}" icon="fa fa-save" 
                                     action ="#{crudBean.ajouterDirigeant()}" process="editForm:membreView:repPanel" 
                                     update="repPanel, editForm:membreView:rep-table" />
                    <p:spacer width="2"/>
                    <p:commandButton id="btnReinitDir" value="#{msga['biblio.pages.membre.fields.reinitialiser']}" type="reset" 
                                     class="btn-default" process="editForm:membreView:repPanel" update="editForm:membreView:repPanel" 
                                     icon="fa fa-refresh" />
                </div>
            </p:fieldset>
        </p:outputPanel>
        <div class="mt-3">
            <p:dataTable id="rep-table" value="#{crudBean.acteurs}" var="item"
                         emptyMessage="#{msga['biblio.pages.membre.fields.aucun-signataire-renseigne']}" 
                         widgetVar="acteursTable"
                         rows="10"
                         paginator="true" paginatorPosition="both"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} enregistrements"
                         rowsPerPageTemplate="5,10,{ShowAll|'Tout'}"         
                         >
                <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.nom']}"   sortBy="#{item.nom}" filterBy="#{item.nom}" filterMatchMode="contains">
                    <h:outputText value="#{item.nom}"/>
                </p:column>
                <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.prenom']}"   sortBy="#{item.prenom}" filterBy="#{item.prenom}" filterMatchMode="contains">
                    <h:outputText value="#{item.prenom}"/>
                </p:column>
                <p:column headerText="#{msga['biblio.pages.membre.fields.chef']}">
                    <p:tag rendered="#{item.chef == true}" icon="pi pi-check-circle" severity="success" value="Oui"/>
                    <p:tag rendered="#{item.chef == false}" icon="pi pi-times-circle" severity="warning" value="Non"/>
                </p:column>
                <p:column headerText="#{msga['biblio.pages.membre.fields.actif']}">
                    <p:tag rendered="#{item.actif == true}" icon="pi pi-check-circle" severity="success" value="Oui"/>
                    <p:tag rendered="#{item.actif == false}" icon="pi pi-times-circle" severity="warning" value="Non"/>
                </p:column>
                <p:column class="text-center" headerText="#{msga['biblio.pages.membre.fields.adresse']}"   sortBy="#{item.adresse.street}" 
                          filterBy="#{item.adresse.street}" filterMatchMode="contains">
                    <h:outputText value="#{item.adresse.street}"/>
                </p:column>
                <p:column headerText="#{msga['core.components.datatable.actions']}">
                    <p:commandButton rendered="#{item.id == null}" icon="fa fa-minus" action="#{crudBean.retirerActeur(item)}" class="ui-button-danger"
                                     title="#{msga['biblio.pages.membre.fields.retirer']}"  process="rep-table" update="rep-table"/> 
                    <p:commandButton rendered="#{item.id !=null and item.actif == false}"
                                     title="#{msga['biblio.pages.membre.fields.activer']}"
                                     style="margin-left: 0.25em"  icon="fa fa-toggle-on" class="ui-button-success"
                                     action="#{crudBean.activer(item)}" update="rep-table" process="rep-table">
                        <p:confirm header="Confirmation" message="Êtes-vous sûrs d'activer ce membre ?" icon="pi pi-exclamation-triangle"/>
                    </p:commandButton>
                    <p:commandButton rendered="#{item.id !=null and item.actif == true}"
                                     icon="fa fa-ban" class="ui-button-danger" style="margin-left: 0.25em" 
                                     title="#{msga['biblio.pages.membre.fields.desactiver']}" 
                                     action="#{crudBean.desactiver(item)}" process="rep-table" update="rep-table">
                        <p:confirm header="Confirmation" message="Êtes-vous sûrs de désactiver ce membre ?" icon="pi pi-exclamation-triangle"/>
                    </p:commandButton>  
                </p:column>
            </p:dataTable>
        </div>
    </h:body>
</html>
